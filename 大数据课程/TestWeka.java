

//要引用weka.jar包



import weka.core.Instances;

import weka.core.converters.ConverterUtils.DataSource;




public class TestWeka {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//打开一个arrf文件，遍历所有记录，输出第一个属性的值
		String DataPath="F:\\eclipse-workspaces\\BigData\\BigData\\Data\\iris.arff";
		DataSource source = null;   

		Instances instances = null;

		try {
			source = new DataSource(DataPath);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		try {
			instances = source.getDataSet();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}  

		instances.setClassIndex(instances.numAttributes()-1);   //设置类标签对应的属性
		
		double []SepallengthValue = new double[instances.numInstances()];
		
		for(int i=0; i<instances.numInstances(); i++){
		      //System.out.println(instances.instance(i).value(0));
		      SepallengthValue[i]= (float) instances.instance(i).value(0);
		}
		System.out.println("求平均："+getAverage(SepallengthValue));
		System.out.println("方差："+getVariance(SepallengthValue));
        //System.out.println("标准差："+getStandardDiviation(SepallengthValue));
        
	}
	/**
     * 求给定双精度数组中值的最大值
     * 
     * @param inputData 输入数据数组
     * @return 运算结果,如果输入值不合法，返回为-1
     */
    public static double getMax(double[] inputData) {
        if (inputData == null || inputData.length == 0) {
            return -1;
        }

        int len = inputData.length;
        double max = inputData[0];

        for (int i = 0; i < len; i++) {
            if (max < inputData[i]) {
                max = inputData[i];
            }
        }
        return max;
    }

    /**
     * 求求给定双精度数组中值的最小值
     * 
     * @param inputData 输入数据数组
     * @return 运算结果,如果输入值不合法，返回为-1
     */
    public static double getMin(double[] inputData) {
        if (inputData == null || inputData.length == 0) {
            return -1;
        }
        int len = inputData.length;
        double min = inputData[0];
        for (int i = 0; i < len; i++) {
            if (min > inputData[i]) {
                min = inputData[i];
            }
        }
        return min;
    }

    /**
     * 求给定双精度数组中值的和
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static double getSum(double[] inputData) {
        if (inputData == null || inputData.length == 0) {
            return -1;
        }
        int len = inputData.length;
        double sum = 0;
        for (int i = 0; i < len; i++) {
            sum = sum + inputData[i];
        }

        return sum;
    }

    /**
     * 求给定双精度数组中值的数目
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static int getCount(double[] inputData) {
        if (inputData == null) {
            return -1;
        }

        return inputData.length;
    }

    /**
     * 求给定双精度数组中值的平均值
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static double getAverage(double[] inputData) {
        if (inputData == null || inputData.length == 0) {
            return -1;
        }
        int len = inputData.length;
        double result;
        result = getSum(inputData) / len;

        return result;
    }

    /**
     * 求给定双精度数组中值的平方和
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static double getSquareSum(double[] inputData) {
        if(inputData == null || inputData.length == 0) {
            return -1;
        }
        int len = inputData.length;
        double sqrsum = 0.0;
        for (int i = 0; i < len; i++) {
            sqrsum = sqrsum + inputData[i] * inputData[i];
        }


        return sqrsum;
    }

	 /**
     * 求给定双精度数组中值的方差
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static double getVariance(double[] inputData) {
        int count = getCount(inputData);
        double sqrsum = getSquareSum(inputData);
        double average = getAverage(inputData);
        double result;
        result = (sqrsum - count * average * average) / count;

        return result; 
    }

    /**
     * 求给定双精度数组中值的标准差
     * 
     * @param inputData 输入数据数组
     * @return 运算结果
     */
    public static double getStandardDiviation(double[] inputData) {
        double result;
        //绝对值化很重要
        result = Math.sqrt(Math.abs(getVariance(inputData)));

        return result;

    }


}
